<div class="flex flex-col gap-6">
  <div class="flex flex-col md:flex-row justify-between md:items-center gap-4">
    <h1 class="text-3xl font-semibold text-surface-900 dark:text-surface-0">
      Class Timetable
    </h1>
    @if (!isLoading && timetable.length > 0) {
      <div class="flex items-center justify-between md:justify-start gap-2">
        <p-button 
          icon="pi pi-arrow-left" 
          [disabled]="currentDayIndex === 0" 
          (click)="previousDay()" 
          styleClass="p-button-outlined p-button-sm"></p-button>
        <span class="font-semibold text-center w-24">{{ timetable[currentDayIndex].dayOrder }}</span>
        <p-button 
          icon="pi pi-arrow-right" 
          [disabled]="currentDayIndex === timetable.length - 1" 
          (click)="nextDay()" 
          styleClass="p-button-outlined p-button-sm"></p-button>
      </div>
    }
  </div>

  <p-card>
    @if (isLoading) {
      <div class="text-center p-4">
        <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
        <p class="mt-2 text-surface-500 dark:text-surface-400">Loading Timetable...</p>
      </div>
    } @else if (timetable.length > 0) {
      @if(currentDayClasses.length > 0) {
        <p-table [value]="currentDayClasses" styleClass="p-datatable-striped">
          <ng-template pTemplate="header">
            <tr>
              <th class="w-1/3 md:w-1/4">Time</th>
              <th>Class Details</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-class>
            <tr [ngClass]="{'bg-primary-50 dark:bg-primary-900/50': class.isClass}">
              <td>
                <div class="font-medium text-surface-800 dark:text-surface-100">{{ class.time.split(' - ')[0] }}</div>
                <div class="text-xs text-surface-500 dark:text-surface-400">{{ class.time.split(' - ')[1] }}</div>
              </td>
              <td>
                <div class="font-bold text-surface-800 dark:text-surface-100">{{ class.courseTitle }}</div>
                <div class="text-sm text-surface-600 dark:text-surface-300">{{ class.courseCode }} - {{ class.courseCategory }}</div>
                <div class="text-xs text-surface-500 dark:text-surface-400 mt-1">{{ class.courseRoomNo }}</div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      } @else {
        <div class="text-center p-4">
          <i class="pi pi-check-circle text-green-500" style="font-size: 2rem"></i>
          <p class="mt-2 text-surface-500 dark:text-surface-400">No classes scheduled for today.</p>
        </div>
      }
    } @else {
      <div class="text-center p-4">
        <i class="pi pi-times-circle text-red-500" style="font-size: 2rem"></i>
        <p class="mt-2 text-surface-500 dark:text-surface-400">Could not load timetable.</p>
      </div>
    }
  </p-card>
</div>


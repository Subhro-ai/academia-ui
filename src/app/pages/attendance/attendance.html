<div class="flex flex-col gap-6">
  <h1 class="text-3xl font-semibold text-surface-900 dark:text-surface-0">
    Attendance Details
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ">
    @for (detail of attendanceDetails; track detail.courseCode) {
      <p-card styleClass="flex flex-col ">
        <div class="flex justify-between items-center p-4 h-full ">
          <!-- Left side: Details -->
          <div class="flex flex-col h-full">
            <div>
              <h2 class="text-xl font-bold text-surface-800 dark:text-surface-100">{{ detail.courseTitle }}</h2>
              <p class="text-sm text-surface-500 dark:text-surface-400">({{ detail.courseCode }}) - {{detail.courseCategory}} </p>
            </div>
            <div class="mt-auto pt-4 flex flex-col gap-2 items-start">
               <span class="attendance-pill bg-green-500/5 inline-flex items-center text-xs font-semibold rounded-full px-3 py-1 text-white">Attended: {{ detail.courseConducted - detail.courseAbsent }}</span>
               <span class="attendance-pill bg-red-600/5 inline-flex items-center text-xs font-semibold rounded-full px-3 py-1 text-white">Absent: {{ detail.courseAbsent }}</span>
               <span class="attendance-pill bg-primary-900 inline-flex items-center text-xs font-semibold rounded-full px-3 py-1 text-white">Total: {{ detail.courseConducted }}</span>
            </div>
          </div>

          <!-- Right side: Margin/Required and Percentage -->
          <div class="text-right flex flex-col items-center justify-center">
            @let margin = getMarginInfo(detail);
            @let percentage = getAttendancePercentage(detail);
            <div class="text-5xl font-bold" [ngClass]="getAttendanceColor(percentage)">
              {{ margin.value }}
            </div>
            <div class="text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wider">
              {{ margin.label }}
            </div>
            <div class="text-sm text-surface-500 dark:text-surface-400 mt-1">
              {{ percentage }}%
            </div>
          </div>
        </div>
      </p-card>
    }
  </div>
</div>


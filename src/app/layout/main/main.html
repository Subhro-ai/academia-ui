<div class="flex h-screen w-screen overflow-hidden bg-surface-50 dark:bg-surface-900">

  @if (isDesktop && sidebarVisible) {
    <p-menu 
      [model]="desktopMenuItems" 
      styleClass="w-[250px] flex flex-col h-full border-r border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-800">
      <ng-template pTemplate="start">
        <span class="inline-flex items-center gap-2 px-4 py-4">
          <span class="text-xl font-semibold">
            Academia<span class="text-primary">Portal</span>
          </span>
        </span>
      </ng-template>
      
      <ng-template pTemplate="item" let-item>
        <a [routerLink]="item.routerLink" pRipple class="flex items-center p-menu-item-link">
          <span [class]="item.icon"></span>
          <span class="ml-2">{{ item.label }}</span>
        </a>
      </ng-template>
      
      <ng-template pTemplate="end">
        <div class="mt-auto">
          <!-- Profile Link -->
          <div class="p-menu-separator mx-1"></div>
          <a routerLink="/profile" pRipple class="flex items-center p-menu-item-link m-2" style="cursor: pointer;">
            <span class="pi pi-user"></span>
            <span class="ml-2">Profile</span>
          </a>
          
          <!-- Custom Logout Button -->
          <button (click)="logout()" pRipple class="flex items-center p-menu-item-link m-2 w-full text-left logout-item border-0 bg-transparent" style="cursor: pointer;">
            <span class="pi pi-sign-out"></span>
            <span class="ml-2">Logout</span>
          </button>
        </div>
      </ng-template>
    </p-menu>
  }

  @if (!isDesktop) {
    <!-- Custom Footer Navigation Bar -->
    <div class="fixed bottom-0 left-0 right-0 z-50 shadow-lg glass-footer">
      <nav class="flex items-center justify-around px-2 py-2">
        @for (item of navItems; track item.label) {
          @if(item.label === 'More') {
            <button (click)="moreMenu.toggle($event)" class="nav-item flex flex-col items-center justify-center px-2 py-2 rounded-lg transition-all duration-200 hover:bg-surface-100 dark:hover:bg-surface-700 min-w-0 flex-1" pRipple>
              <span [class]="item.icon" class="text-lg mb-1 transition-colors duration-200"></span>
              <span class="text-xs font-medium transition-colors duration-200 text-center leading-tight">{{ item.label }}</span>
            </button>
          } @else {
            <a 
              [routerLink]="item.route" 
              routerLinkActive="nav-active"
              [routerLinkActiveOptions]="{exact: true}"
              class="nav-item flex flex-col items-center justify-center px-2 py-2 rounded-lg transition-all duration-200 hover:bg-surface-100 dark:hover:bg-surface-700 min-w-0 flex-1"
              pRipple>
              <span [class]="item.icon" class="text-lg mb-1 transition-colors duration-200"></span>
              <span class="text-xs font-medium transition-colors duration-200 text-center leading-tight">{{ item.label }}</span>
            </a>
          }
        }
      </nav>
      <p-menu #moreMenu [model]="moreMenuItems" [popup]="true"></p-menu>
    </div>
  }

  <div class="flex-1 flex flex-col overflow-y-auto relative">
    <main class="p-6 pb-24 md:pb-6" >
      <router-outlet #outlet="outlet"></router-outlet>
    </main>
  </div>
</div>

